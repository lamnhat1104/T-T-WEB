Index: src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.doancuoiki.controller;\r\n\r\nimport jakarta.servlet.*;\r\nimport jakarta.servlet.http.*;\r\nimport jakarta.servlet.annotation.*;\r\n\r\nimport vn.edu.hcmuaf.fit.doancuoiki.dao.*;\r\nimport vn.edu.hcmuaf.fit.doancuoiki.model.*;\r\n\r\nimport java.io.IOException;\r\nimport java.sql.Date;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.List;\r\n\r\n\r\n\r\n@WebServlet(name = \"AdminController\", value = \"/admin\")\r\npublic class AdminController extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        String action = request.getParameter(\"action\");\r\n        switch (action) {\r\n            case \"dashboard\":\r\n                managerDashboard(request, response);\r\n                break;\r\n            case \"managerCustomer\":\r\n                managerCustomer(request, response);\r\n                break;\r\n            case \"changeStatusUser\":\r\n                changeStatusUser(request, response);\r\n                break;\r\n            case \"changeRoleUser\":\r\n                changeRoleUser(request, response);\r\n                break;\r\n            case \"managerVehicleType\":\r\n                managerVehicleType(request, response);\r\n                break;\r\n            case \"changeStatusVehicle\":\r\n                changeStatusVehicle(request, response);\r\n                break;\r\n            case \"managerOrder\":\r\n                managerOrder(request, response);\r\n                break;\r\n            case \"managerPromotion\":\r\n                managerPromotion(request, response);\r\n                break;\r\n            case \"managerContact\":\r\n                managerContact(request, response);\r\n                break;\r\n            case \"managerNew\":\r\n                managerNew(request, response);\r\n                break;\r\n            case \"managerStatMotor\":\r\n                managerStatMotor(request, response);\r\n                break;\r\n            case \"managerStatIncome\":\r\n                managerStatIncome(request, response);\r\n                break;\r\n            case \"managerSetting\":\r\n                managerSetting(request, response);\r\n                break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        String action = request.getParameter(\"action\");\r\n        switch (action) {\r\n            case \"updateVehicleType\":\r\n                updateVehicleType(request, response);\r\n                break;\r\n            case \"addVehicleType\":\r\n                addVehicleType(request, response);\r\n                break;\r\n            case \"deleteOrder\":\r\n                deleteOrder(request, response);\r\n                break;\r\n            case \"updateOrder\":\r\n                updateOrder(request, response);\r\n                break;\r\n            case \"updateOrderStatus\":\r\n                updateOrderStatus(request, response);\r\n                break;\r\n\r\n            case \"deleteCustomer\":\r\n                deleteCustomer(request, response);\r\n                break;\r\n            case \"updateCustomer\":\r\n                updateCustomer(request, response);\r\n                break;\r\n            case \"deleteVehicleType\":\r\n                deleteVehicleType(request, response);\r\n                break;\r\n            case \"addPromotion\":\r\n                addPromotion(request, response);\r\n                break;\r\n            case \"deletePromotion\":\r\n                deletePromotion(request, response);\r\n                break;\r\n            case \"updatePromotion\":\r\n                updatePromotion(request, response);\r\n                break;\r\n            case \"changePromotionStatus\":\r\n                changePromotionStatus(request, response);\r\n                break;\r\n            case \"deleteContact\":\r\n                deleteContact(request, response);\r\n                break;\r\n            case \"deleteNew\":\r\n                deleteNew(request, response);\r\n                break;\r\n            case \"addNew\":\r\n                addNew(request, response);\r\n                break;\r\n            case \"updateNew\":\r\n                updateNew(request, response);\r\n                break;\r\n            case \"changeNewsStatus\":\r\n                changeNewsStatus(request, response);\r\n                break;\r\n            case \"changeContactStatus\":\r\n                changeContactStatus(request, response);\r\n                break;\r\n        }\r\n    }\r\n// Quản lý khuyến mãi\r\n    private void managerPromotion(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        PromotionDao promotionDao = new PromotionDao();\r\n        List<Promotion> promotions = promotionDao.getAllPromotion();\r\n        request.setAttribute(\"promotions\", promotions);\r\n        request.getRequestDispatcher(\"admin/promotion.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void addPromotion(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {;\r\n        try {\r\n            String promotionName = request.getParameter(\"promo-name\");\r\n            String description = request.getParameter(\"description\");\r\n            double discountValue = Double.parseDouble(request.getParameter(\"discount-value\"));\r\n            String startDatee = request.getParameter(\"start-date\");\r\n            String endDatee = request.getParameter(\"end-date\");\r\n            int isActive = Integer.parseInt(request.getParameter(\"is-active\"));\r\n            int discountType = Integer.parseInt(request.getParameter(\"discount-type\"));\r\n\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date startDate = new Date(dateFormat.parse(startDatee).getTime());\r\n            Date endDate = new Date(dateFormat.parse(endDatee).getTime());\r\n\r\n            PromotionDao promotionDao = new PromotionDao();\r\n            promotionDao.addPromotion(promotionName, description, discountValue, discountType, startDate, endDate, isActive);\r\n            managerPromotion(request, response);\r\n        } catch (ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private void deletePromotion(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int id = Integer.parseInt(request.getParameter(\"promo-id\"));\r\n        PromotionDao promotionDao = new PromotionDao();\r\n        promotionDao.deletePromotion(id);\r\n        managerPromotion(request,response);\r\n    }\r\n\r\n    private void updatePromotion(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        try {\r\n            // Lấy các tham số từ form\r\n            int id = Integer.parseInt(request.getParameter(\"id\")); // Lấy ID đơn hàng\r\n            String promotionName = request.getParameter(\"promotionName\"); // Lấy mã khách hàng\r\n            String description = request.getParameter(\"descriptionName\"); // Lấy địa chỉ giao xe\r\n            double discountValue = Double.parseDouble(request.getParameter(\"discountValue\"));\r\n            String rentalStartDate = request.getParameter(\"startDate\"); // Lấy ngày thuê\r\n            String expectedReturnDate = request.getParameter(\"endDate\"); // Lấy ngày trả dự kiến\r\n            int isActive = Integer.parseInt(request.getParameter(\"isActive\"));\r\n            int discountType = Integer.parseInt(request.getParameter(\"discountType\"));\r\n\r\n            // Chuyển đổi ngày từ String sang Date\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date startDate = new Date(dateFormat.parse(rentalStartDate).getTime());\r\n            Date endDate = new Date(dateFormat.parse(expectedReturnDate).getTime());\r\n            // Tạo đối tượng OrderDao để thực hiện cập nhật đơn hàng\r\n            PromotionDao promotionDao = new PromotionDao();\r\n            // Cập nhật đơn hàng\r\n            promotionDao.updatePromotion(id, promotionName, description, discountValue, startDate, endDate, isActive, discountType);\r\n            managerPromotion(request,response);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Thông tin không hợp lệ.\");\r\n        }\r\n    }\r\n    private void changePromotionStatus(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int promoId = Integer.parseInt(request.getParameter(\"promotionId\"));\r\n        int isActive = Integer.parseInt(request.getParameter(\"isActive\"));\r\n        PromotionDao dao = new PromotionDao();\r\n        dao.updatePromotionStatus(promoId, isActive);\r\n        managerPromotion(request,response);\r\n\r\n    }\r\n\r\n// Quản lý phản hồi khách hàng\r\n    private void managerContact(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        ContactDao contactDao = new ContactDao();\r\n        List<Contact> contacts = contactDao.getAllContact();\r\n        request.setAttribute(\"contacts\", contacts);\r\n        request.getRequestDispatcher(\"admin/feedback.jsp\").forward(request, response);\r\n    }\r\n    private void deleteContact(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int id = Integer.parseInt(request.getParameter(\"contact-id\"));\r\n        ContactDao contactDao = new ContactDao();\r\n        contactDao.deleteContact(id);\r\n        managerContact(request,response);\r\n    }\r\n    private void changeContactStatus(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int contactId = Integer.parseInt(request.getParameter(\"contactId\"));\r\n        int status = Integer.parseInt(request.getParameter(\"status\"));\r\n        ContactDao dao = new ContactDao();\r\n        dao.updateContactStatus(contactId, status);\r\n        managerContact(request,response);\r\n    }\r\n\r\n// Quản lý tin tức\r\n    private void managerNew(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        NewDao newDao = new NewDao();\r\n        List<New> newsList = newDao.getAllNew();\r\n        request.setAttribute(\"news\", newsList);\r\n        request.getRequestDispatcher(\"admin/qltintuc.jsp\").forward(request, response);\r\n\r\n    }\r\n\r\n    private void deleteNew(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int id = Integer.parseInt(request.getParameter(\"new-id\"));\r\n        NewDao newDao = new NewDao();\r\n        newDao.deleteNew(id);\r\n        managerNew(request,response);\r\n    }\r\n\r\n    private void addNew(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {;\r\n        try {\r\n            String title = request.getParameter(\"title\");\r\n            String content = request.getParameter(\"content\");\r\n            String image = request.getParameter(\"image\");\r\n            String startDate = request.getParameter(\"created-date\");\r\n            int isActive = Integer.parseInt(request.getParameter(\"is-active\"));\r\n\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date createdDate = new Date(dateFormat.parse(startDate).getTime());\r\n\r\n            NewDao newDao = new NewDao();\r\n            newDao.addNew(title, content, image, createdDate, isActive);\r\n            managerNew(request, response);\r\n        } catch (ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private void updateNew(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        try {\r\n            // Lấy các tham số từ form\r\n            int id = Integer.parseInt(request.getParameter(\"new-id\")); // Lấy ID đơn hàng\r\n            String title = request.getParameter(\"new-title\"); // Lấy mã khách hàng\r\n            String content = request.getParameter(\"new-content\"); // Lấy địa chỉ giao xe\r\n            String image = request.getParameter(\"new-image\"); // Lấy ngày thuê\r\n            String starDate = request.getParameter(\"new-createdDate\"); // Lấy ngày trả dự kiến\r\n            int isActive = Integer.parseInt(request.getParameter(\"new-isActive\"));\r\n\r\n\r\n            // Chuyển đổi ngày từ String sang Date\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date ceatedDate = new Date(dateFormat.parse(starDate).getTime());\r\n\r\n            // Tạo đối tượng OrderDao để thực hiện cập nhật đơn hàng\r\n            NewDao newDao = new NewDao();\r\n            // Cập nhật đơn hàng\r\n            newDao.updateNew(id, title, content, image, ceatedDate, isActive);\r\n            managerNew(request,response);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Thông tin không hợp lệ.\");\r\n        }\r\n    }\r\n\r\n    private void changeNewsStatus(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\r\n        int id = Integer.parseInt(request.getParameter(\"newsId\"));\r\n        int isActive = Integer.parseInt(request.getParameter(\"isActive\"));\r\n        NewDao dao = new NewDao();\r\n        dao.updateNewsStatus(id, isActive);\r\n        managerNew(request,response);\r\n    }\r\n\r\n    private void managerStatMotor(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        request.getRequestDispatcher(\"admin/stats_motors.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void managerStatIncome(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        request.getRequestDispatcher(\"admin/stats_income.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void managerSetting(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        request.getRequestDispatcher(\"admin/setting.jsp\").forward(request, response);\r\n    }\r\n\r\n\r\n\r\n// Quanr lý đơn hàng\r\n    private void managerOrder(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        OrderDao orderDao = new OrderDao();\r\n        List<Order> orders = orderDao.getAllOrder();\r\n        request.setAttribute(\"orders\", orders);\r\n        request.getRequestDispatcher(\"admin/orders.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void deleteOrder(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int orderId = Integer.parseInt(request.getParameter(\"orderId\"));\r\n        OrderDao orderDao = new OrderDao();\r\n        orderDao.deleteOrder(orderId);\r\n        managerOrder(request,response);\r\n    }\r\n\r\n    private void updateOrder(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        try {\r\n            // Lấy các tham số từ form\r\n            int orderId = Integer.parseInt(request.getParameter(\"orderId\")); // Lấy ID đơn hàng\r\n            int customerId = Integer.parseInt(request.getParameter(\"customerId\")); // Lấy mã khách hàng\r\n            String deliveryAddress = request.getParameter(\"deliveryAddress\"); // Lấy địa chỉ giao xe\r\n            String rentalStartDate = request.getParameter(\"rentalStartDate\"); // Lấy ngày thuê\r\n            String expectedReturnDate = request.getParameter(\"expectedReturnDate\"); // Lấy ngày trả dự kiến\r\n            String licensePlate = request.getParameter(\"licensePlate\"); // Lấy biển số xe\r\n            double rentalPrice = Double.parseDouble(request.getParameter(\"rentalPrice\")); // Lấy giá thuê xe\r\n            int status = Integer.parseInt(request.getParameter(\"status\")); // Lấy trạng thái đơn hàng\r\n\r\n            // Chuyển đổi ngày từ String sang Date\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date startDate = new Date(dateFormat.parse(rentalStartDate).getTime());\r\n            Date endDate = new Date(dateFormat.parse(expectedReturnDate).getTime());\r\n            // Tạo đối tượng OrderDao để thực hiện cập nhật đơn hàng\r\n            OrderDao dao = new OrderDao();\r\n            // Cập nhật đơn hàng\r\n            dao.updateOrder(orderId, customerId, deliveryAddress, startDate, endDate, licensePlate, rentalPrice, status);\r\n            managerOrder(request,response);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Thông tin không hợp lệ.\");\r\n        }\r\n    }\r\n\r\n    private void updateOrderStatus(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int orderId = Integer.parseInt(request.getParameter(\"orderId\"));\r\n        int status = Integer.parseInt(request.getParameter(\"status\"));\r\n        OrderDao dao = new OrderDao();\r\n        dao.updateOrderStatus(orderId, status);\r\n\r\n        managerOrder(request,response);\r\n    }\r\n\r\n\r\n    private void managerDashboard(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        request.getRequestDispatcher(\"admin/admin.jsp\").forward(request, response);\r\n    }\r\n\r\n\r\n// Quản lý khách hàng\r\n    private void managerCustomer(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        UserDao dao = new UserDao();\r\n        List<User> users = dao.getUsers();\r\n        request.setAttribute(\"users\", users);\r\n        request.getRequestDispatcher(\"admin/customers.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void changeStatusUser(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        UserDao dao = new UserDao();\r\n        int id = Integer.parseInt(request.getParameter(\"userId\"));\r\n        int status = Integer.parseInt(request.getParameter(\"status\")); // \"true\" hoặc \"false\"\r\n        dao.changeActive(id, status);\r\n        managerCustomer(request, response);\r\n    }\r\n\r\n    private void changeRoleUser(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        UserDao dao = new UserDao();\r\n        int id = Integer.parseInt(request.getParameter(\"userId\"));\r\n        int role = Integer.parseInt(request.getParameter(\"roleId\"));\r\n        dao.changeRole(id, role);\r\n        managerCustomer(request, response);\r\n    }\r\n\r\n    private void deleteCustomer(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        String customerIdStr = request.getParameter(\"customerId\");\r\n\r\n        if (customerIdStr == null || customerIdStr.trim().isEmpty()) {\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Customer ID is missing or invalid\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            int customerId = Integer.parseInt(customerIdStr);\r\n            UserDao dao = new UserDao();\r\n            dao.deleteCustomer(customerId);\r\n            managerCustomer(request,response);\r\n        } catch (NumberFormatException e) {\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Invalid Customer ID format\");\r\n        }\r\n    }\r\n\r\n    private void updateCustomer(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        try {\r\n            // Lấy các tham số từ form\r\n            int id = Integer.parseInt(request.getParameter(\"id\"));\r\n            int userId = Integer.parseInt(request.getParameter(\"customerId\"));\r\n            String fullName = request.getParameter(\"fullName\");\r\n            String phoneNumber = request.getParameter(\"phoneNumber\");\r\n            String email = request.getParameter(\"emailCus\");\r\n            String address = request.getParameter(\"addressCus\");\r\n            int roleId = Integer.parseInt(request.getParameter(\"roleId\"));\r\n            int isActive = Integer.parseInt(request.getParameter(\"status\"));\r\n\r\n            String birthDayStr = request.getParameter(\"birthDateCus\");\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n            Date birthDate = new Date(dateFormat.parse(birthDayStr).getTime());\r\n\r\n\r\n            // Tạo đối tượng OrderDao để thực hiện cập nhật đơn hàng\r\n            UserDao userDao = new UserDao();\r\n            // Cập nhật đơn hàng\r\n            userDao.updateCustomer(id, userId, fullName, phoneNumber, birthDate, email, address, roleId, isActive);\r\n            managerCustomer(request,response);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_BAD_REQUEST, \"Thông tin không hợp lệ.\");\r\n        }\r\n    }\r\n\r\n\r\n\r\n// Quản lý xe máy\r\n    private void managerVehicleType(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        VehicleTypeDao dao = new VehicleTypeDao();\r\n        List<VehicleType> vehicleTypeList = dao.getAllVehicleType();\r\n        request.setAttribute(\"vehicleTypeList\", vehicleTypeList);\r\n        request.getRequestDispatcher(\"admin/motorbikes.jsp\").forward(request, response);\r\n    }\r\n\r\n    private void deleteVehicleType(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int id = Integer.parseInt(request.getParameter(\"vehicleId\"));\r\n        VehicleTypeDao dao = new VehicleTypeDao();\r\n        dao.deleteVehicleType(id);\r\n        managerVehicleType(request, response);\r\n    }\r\n\r\n    private void updateVehicleType(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        int id = Integer.parseInt(request.getParameter(\"id\"));\r\n        String name = request.getParameter(\"name\");\r\n        String brand = request.getParameter(\"brand\");\r\n        String category = request.getParameter(\"category\");\r\n        double totalPrice = Double.parseDouble(request.getParameter(\"totalPrice\"));\r\n        String description = request.getParameter(\"description\");\r\n        String image = request.getParameter(\"image\");\r\n        int totalVehicles = Integer.parseInt(request.getParameter(\"totalVehicles\"));\r\n        int available = Integer.parseInt(request.getParameter(\"available\"));\r\n\r\n        VehicleTypeDao dao = new VehicleTypeDao();\r\n        dao.updateVehicleType(id, name, brand, category, totalPrice, description, image, totalVehicles, available);\r\n        managerVehicleType(request, response);\r\n    }\r\n\r\n    private void addVehicleType(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {;\r\n        String name = request.getParameter(\"addName\");\r\n        String brand = request.getParameter(\"addBrand\");\r\n        String category = request.getParameter(\"addCategory\");\r\n        double totalPrice = Double.parseDouble(request.getParameter(\"addTotalPrice\"));\r\n        String description = request.getParameter(\"addDescription\");\r\n        String image = request.getParameter(\"addImage\");\r\n        int totalVehicles = Integer.parseInt(request.getParameter(\"addTotalVehicles\"));\r\n        int available = Integer.parseInt(request.getParameter(\"addAvailable\"));\r\n\r\n        VehicleTypeDao dao = new VehicleTypeDao();\r\n        dao.addVehicleType(name, brand, category, totalPrice, description, image, totalVehicles, available);\r\n        managerVehicleType(request, response);\r\n    }\r\n    private void changeStatusVehicle(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        VehicleTypeDao dao = new VehicleTypeDao();\r\n        int id = Integer.parseInt(request.getParameter(\"vehicleId\"));\r\n        int isAvailable = Integer.parseInt(request.getParameter(\"isAvailable\"));\r\n        dao.updateAvailableStatus(id, isAvailable);\r\n        managerVehicleType(request, response);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java
--- a/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java	(date 1746713985832)
@@ -6,6 +6,7 @@
 
 import vn.edu.hcmuaf.fit.doancuoiki.dao.*;
 import vn.edu.hcmuaf.fit.doancuoiki.model.*;
+import vn.edu.hcmuaf.fit.doancuoiki.model.Order;
 
 import java.io.IOException;
 import java.sql.Date;
Index: src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package vn.edu.hcmuaf.fit.doancuoiki.dao;\r\n\r\nimport vn.edu.hcmuaf.fit.doancuoiki.db.DBContext;\r\n\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.Date;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.SQLException;\r\nimport java.text.SimpleDateFormat;\r\nimport vn.edu.hcmuaf.fit.doancuoiki.model.Order;\r\nimport vn.edu.hcmuaf.fit.doancuoiki.model.OrderDetail;\r\nimport vn.edu.hcmuaf.fit.doancuoiki.model.Promotion;\r\nimport vn.edu.hcmuaf.fit.doancuoiki.model.VehicleType;\r\n\r\nimport java.sql.*;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class OrderDao {\r\n\r\n    public boolean createOrder(int id, String location, Date rentalStartDate, Date expectedReturnDate, String licensePlate, double priceAtOrder, int promotionId) {\r\n        String sql1 = \"INSERT INTO orders (customerId, rentalStartDate, expectedReturnDate, deliveryAddress, promotionId) VALUES (?, ?, ?, ?, ?)\";\r\n        String sql2 = \"INSERT INTO orderdetails (orderId, licensePlate, priceAtOrder) VALUES (?, ?, ?)\";\r\n        if (licensePlate.equals(\"\")) return false;\r\n\r\n        try (Connection conn = new DBContext().getConnection();\r\n             PreparedStatement pre = conn.prepareStatement(sql1, Statement.RETURN_GENERATED_KEYS)) {\r\n            pre.setInt(1, id);\r\n            pre.setDate(2, rentalStartDate);\r\n            pre.setDate(3, expectedReturnDate);\r\n            pre.setString(4, location);\r\n\r\n            if (promotionId != -1) {\r\n                pre.setInt(5, promotionId);\r\n            } else {\r\n                pre.setNull(5, java.sql.Types.INTEGER);\r\n            }\r\n\r\n            int rowsAffected1 = pre.executeUpdate();\r\n\r\n            int orderId = 0;\r\n            if (rowsAffected1 > 0) {\r\n                try (ResultSet rs = pre.getGeneratedKeys()) {\r\n                    if (rs.next()) {\r\n                        orderId = rs.getInt(1);\r\n                    }\r\n                }\r\n            }\r\n\r\n            int rowsAffected2;\r\n            try (PreparedStatement pre2 = conn.prepareStatement(sql2)) {\r\n                pre2.setInt(1, orderId);\r\n                pre2.setString(2, licensePlate);\r\n                pre2.setDouble(3, priceAtOrder);\r\n                rowsAffected2 = pre2.executeUpdate();\r\n            }\r\n\r\n            return rowsAffected1 > 0 && rowsAffected2 > 0;\r\n\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public String getLicensePlate(int vehicleType, Date rentalStartDate, Date expectedReturnDate) {\r\n        String sql = \"SELECT v.licensePlate\\n\" +\r\n                \"FROM vehicles v\\n\" +\r\n                \"WHERE v.typeId = ? and v.isInUse = 1 -- Điều kiện typeId được áp dụng ở truy vấn ngoài\\n\" +\r\n                \"  AND v.licensePlate NOT IN (\\n\" +\r\n                \"    SELECT od.licensePlate\\n\" +\r\n                \"    FROM orderDetails od\\n\" +\r\n                \"    JOIN orders o ON od.orderId = o.id\\n\" +\r\n                \"    WHERE (o.rentalStartDate <= ?) \\n\" +\r\n                \"      AND (o.expectedReturnDate BETWEEN ? AND ? \\n\" +\r\n                \"           OR o.expectedReturnDate > ?) \\n\" +\r\n                \"     AND o.status NOT LIKE \\\"Đã huỷ\\\"\\n\" +\r\n                \");\";\r\n        String licensePlate = \"\";\r\n        try(Connection conn = new DBContext().getConnection();\r\n        PreparedStatement pre = conn.prepareStatement(sql)){\r\n            pre.setInt(1, vehicleType);\r\n            pre.setDate(2, expectedReturnDate);\r\n            pre.setDate(3, rentalStartDate);\r\n            pre.setDate(4,expectedReturnDate);\r\n            pre.setDate(5, expectedReturnDate);\r\n            ResultSet rs = pre.executeQuery();\r\n            if(rs.next()){\r\n                licensePlate = rs.getString(\"licensePlate\");\r\n            }\r\n            pre.executeQuery();\r\n        }catch (SQLException e){\r\n            e.printStackTrace();\r\n        }\r\n        return licensePlate;\r\n    }\r\n\r\n    public List<Order> getAllOrder() {\r\n        List<Order> orders = new ArrayList<>();\r\n        String sql = \"SELECT orders.*, orderdetails.*, vehicles.*, vehicletypes.*, promotions.id AS promo_id, \" +\r\n                \"promotions.promotionName, promotions.discountType, promotions.discountValue\\n \" +\r\n                \"FROM orders \" +\r\n                \"JOIN orderdetails ON orders.id = orderdetails.orderId \" +\r\n                \"JOIN vehicles ON orderdetails.licensePlate = vehicles.licensePlate \" +\r\n                \"JOIN vehicletypes ON vehicletypes.id = vehicles.typeId \" +\r\n                \"LEFT JOIN promotions ON promotions.id = orders.promotionId\";\r\n\r\n        try (Connection con = new DBContext().getConnection();\r\n             PreparedStatement pre = con.prepareStatement(sql)) {\r\n            ResultSet rs = pre.executeQuery();\r\n            while (rs.next()) {\r\n                // Lấy order detail\r\n                OrderDetail orderDetail = new OrderDetail(\r\n                        rs.getInt(\"orderId\"),\r\n                        rs.getString(\"licensePlate\"),\r\n                        rs.getString(\"name\"),\r\n                        rs.getDouble(\"priceAtOrder\")\r\n                );\r\n\r\n                // Lấy vehicle type\r\n                VehicleType vehicleType = new VehicleType(\r\n                        rs.getInt(\"vehicletypes.id\"),\r\n                        rs.getString(\"image\")\r\n                );\r\n\r\n                // Lấy promotion nếu có\r\n                Promotion promotion = null;\r\n                int promoId = rs.getInt(\"promo_id\");\r\n                if (promoId > 0) {\r\n                    promotion = new Promotion();\r\n                    promotion.setId(promoId);\r\n                    promotion.setPromotionName(rs.getString(\"promotionName\"));\r\n                    promotion.setDiscountType(rs.getInt(\"discountType\"));\r\n                    promotion.setDiscountValue(rs.getDouble(\"discountValue\"));\r\n                }\r\n\r\n                // Tạo đối tượng Order\r\n                Order order = new Order();\r\n                order.setId(rs.getInt(\"id\"));\r\n                order.setCustomerId(rs.getInt(\"customerId\"));\r\n                order.setDeliveryAddress(rs.getString(\"deliveryAddress\"));\r\n                order.setCreatedDate(rs.getDate(\"createdDate\"));\r\n                order.setExpectedReturnDate(rs.getDate(\"expectedReturnDate\"));\r\n                order.setRetalStarDate(rs.getDate(\"rentalStartDate\"));\r\n                order.setStatus(rs.getInt(\"status\"));\r\n                order.setOrderDetail(orderDetail);\r\n                order.setVehicleType(vehicleType);\r\n                order.setPromotion(promotion);\r\n\r\n                orders.add(order);\r\n            }\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return orders;\r\n    }\r\n\r\n\r\n    public void deleteOrder(int orderId){\r\n        String sql = \"DELETE FROM orders WHERE id = ?\";\r\n        try(Connection conn = new DBContext().getConnection();\r\n            PreparedStatement pre = conn.prepareStatement(sql)){\r\n            pre.setInt(1, orderId);\r\n            pre.executeUpdate();\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public void updateOrder(int id, int customerId, String location, Date rentalStartDate, Date expectedReturnDate, String licensePlate, double priceAtOrder, int status) {\r\n        // SQL để cập nhật thông tin đơn hàng\r\n        String sql1 = \"UPDATE orders SET customerId = ?, rentalStartDate = ?, expectedReturnDate = ?, deliveryAddress = ?, status = ? WHERE id = ?\";\r\n        // SQL để cập nhật thông tin chi tiết đơn hàng\r\n        String sql2 = \"UPDATE orderdetails SET licensePlate = ?, priceAtOrder = ? WHERE orderId = ?\";\r\n\r\n        try (Connection conn = new DBContext().getConnection()) {\r\n            // Cập nhật đơn hàng\r\n            try (PreparedStatement pre1 = conn.prepareStatement(sql1)) {\r\n                pre1.setInt(1, customerId);\r\n                pre1.setDate(2, rentalStartDate);\r\n                pre1.setDate(3, expectedReturnDate);\r\n                pre1.setString(4, location);\r\n                pre1.setInt(5, status);\r\n                pre1.setInt(6, id);  // Sử dụng customerId làm khóa để tìm đơn hàng cần cập nhật\r\n                pre1.executeUpdate();\r\n\r\n                // Cập nhật chi tiết đơn hàng\r\n                try (PreparedStatement pre2 = conn.prepareStatement(sql2)) {\r\n                    pre2.setString(1, licensePlate);\r\n                    pre2.setDouble(2, priceAtOrder);\r\n                    pre2.setInt(3, id);  // Cập nhật order details dựa trên orderId\r\n                    pre2.executeUpdate();\r\n                }\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public void updateOrderStatus(int orderId, int status) {\r\n        String sql = \"UPDATE orders SET status = ? WHERE id = ?\";\r\n        try (Connection conn = new DBContext().getConnection();\r\n             PreparedStatement pre = conn.prepareStatement(sql)) {\r\n            pre.setInt(1, status);\r\n            pre.setInt(2, orderId);\r\n            pre.executeUpdate();\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public void updatePromotionInOrder(int orderId, int promotionId) {\r\n        String sql = \"UPDATE orders SET promotionId = ? WHERE id = ?\";\r\n        try (Connection conn = new DBContext().getConnection();\r\n             PreparedStatement ps = conn.prepareStatement(sql)) {\r\n            ps.setInt(1, promotionId);\r\n            ps.setInt(2, orderId);\r\n            ps.executeUpdate();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java
--- a/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java	(date 1746714128710)
@@ -20,6 +20,10 @@
 
 public class OrderDao {
 
+    public static List<Order> getOrdersByUser(String userId) {
+        return new ArrayList<>();
+    }
+
     public boolean createOrder(int id, String location, Date rentalStartDate, Date expectedReturnDate, String licensePlate, double priceAtOrder, int promotionId) {
         String sql1 = "INSERT INTO orders (customerId, rentalStartDate, expectedReturnDate, deliveryAddress, promotionId) VALUES (?, ?, ?, ?, ?)";
         String sql2 = "INSERT INTO orderdetails (orderId, licensePlate, priceAtOrder) VALUES (?, ?, ?)";
@@ -220,6 +224,63 @@
             e.printStackTrace();
         }
     }
+    public Order getOrderById(int orderId) {
+        String sql = "SELECT orders.*, orderdetails.*, vehicles.*, vehicletypes.*, promotions.id AS promo_id, " +
+                "promotions.promotionName, promotions.discountType, promotions.discountValue " +
+                "FROM orders " +
+                "JOIN orderdetails ON orders.id = orderdetails.orderId " +
+                "JOIN vehicles ON orderdetails.licensePlate = vehicles.licensePlate " +
+                "JOIN vehicletypes ON vehicletypes.id = vehicles.typeId " +
+                "LEFT JOIN promotions ON promotions.id = orders.promotionId " +
+                "WHERE orders.id = ?";
+        try (Connection con = new DBContext().getConnection();
+             PreparedStatement pre = con.prepareStatement(sql)) {
+            pre.setInt(1, orderId);
+            ResultSet rs = pre.executeQuery();
+            if (rs.next()) {
+                // Chuyển dữ liệu ResultSet thành đối tượng Order
+                OrderDetail orderDetail = new OrderDetail(
+                        rs.getInt("orderId"),
+                        rs.getString("licensePlate"),
+                        rs.getString("name"),
+                        rs.getDouble("priceAtOrder")
+                );
+
+                VehicleType vehicleType = new VehicleType(
+                        rs.getInt("vehicletypes.id"),
+                        rs.getString("image")
+                );
+
+                Promotion promotion = null;
+                int promoId = rs.getInt("promo_id");
+                if (promoId > 0) {
+                    promotion = new Promotion();
+                    promotion.setId(promoId);
+                    promotion.setPromotionName(rs.getString("promotionName"));
+                    promotion.setDiscountType(rs.getInt("discountType"));
+                    promotion.setDiscountValue(rs.getDouble("discountValue"));
+                }
+
+                Order order = new Order();
+                order.setId(rs.getInt("id"));
+                order.setCustomerId(rs.getInt("customerId"));
+                order.setDeliveryAddress(rs.getString("deliveryAddress"));
+                order.setCreatedDate(rs.getDate("createdDate"));
+                order.setExpectedReturnDate(rs.getDate("expectedReturnDate"));
+                order.setRetalStarDate(rs.getDate("rentalStartDate"));
+                order.setStatus(rs.getInt("status"));
+                order.setOrderDetail(orderDetail);
+                order.setVehicleType(vehicleType);
+                order.setPromotion(promotion);
+
+                return order;
+            }
+        } catch (SQLException e) {
+            e.printStackTrace();
+        }
+        return null;
+    }
+
 
 
 }
Index: src/main/webapp/product-detail.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"vn.edu.hcmuaf.fit.doancuoiki.model.Comment\" %>\r\n<%@ page import=\"java.util.List\" %>\r\n<%@ page import=\"vn.edu.hcmuaf.fit.doancuoiki.dao.CommentDao\" %><%--\r\n  Created by IntelliJ IDEA.\r\n  User: PC\r\n  Date: 12/22/2024\r\n  Time: 6:22 PM\r\n  To change this template use File | Settings | File Templates.\r\n--%>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<%@ taglib prefix = \"c\" uri = \"http://java.sun.com/jsp/jstl/core\" %>\r\n<%@ taglib prefix = \"f\" uri = \"http://java.sun.com/jsp/jstl/fmt\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>\"${p.name}\"</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css\">\r\n    <link rel=\"stylesheet\" href=\"assets/css/base.css\">\r\n    <link rel=\"stylesheet\" href=\"assets/css/product-detail.css\">\r\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap\" rel=\"stylesheet\">\r\n    <script src=\"assets/js/ValidateAndCalculate.js\"></script>\r\n</head>\r\n\r\n<body>\r\n<%@ include file=\"header.jsp\" %>\r\n<div class=\"product-detail\">\r\n    <div class=\"container\">\r\n        <button onclick=\"topFunction()\" id=\"myBtn\" title=\"Go to top\"><i class=\"fa-solid fa-arrow-up\"></i></button>\r\n        <div class=\"information-content\">\r\n            <div class=\"product-image\">\r\n                <img src=\"${p.img}\" alt=\"${p.name}\">\r\n            </div>\r\n            <form class=\"rental-information\" action=\"OrderController\" method=\"post\">\r\n                <input type=\"hidden\" name=\"pid\" value=\"${param.pid}\">\r\n                <input type=\"hidden\" name=\"price\" value=\"${p.price}\">\r\n                <div class=\"info\">\r\n                    <h1 class=\"name-moto\" style=\"text-align: center\">${p.name}</h1>\r\n                    <h3 id=\"price-per-day\">Giá thuê: <f:formatNumber value=\"${p.price}\" />đ/ngày</h3>\r\n                    <h3 id=\"manufacturer\">Nhà sản xuất: ${p.brand}</h3>\r\n                    <h3 id=\"year-of-manufacture\">Năm sản xuất: ${p.year}</h3>\r\n                    <h3 id=\"type\">Loại xe: Xe số</h3>\r\n                    <p class=\"note\">* Giá thuê chưa bao gồm: Xăng phục vụ suốt chuyến đi, Bảo hiểm hành khách, Thuế VAT, Phụ thu dịp Lễ Tết.</p>\r\n                </div>\r\n                <div class=\"fill-in-info\">\r\n                    <div class=\"fill-in-item\">\r\n\r\n                      <%--@declare id=\"paymentmethods\"--%><label for=\"coupon\">Mã giảm giá</label>\r\n                      <input type=\"text\" id=\"coupon\" name=\"coupon\">\r\n                      <label for=\"location\">Địa điểm giao xe</label>\r\n                      <input type=\"text\" id=\"location\" name=\"location\" required>\r\n                      <label for=\"rentalStartDate\">Thời gian nhận xe</label>\r\n                      <input type=\"date\" id=\"rentalStartDate\" name=\"rentalStartDate\" required>\r\n                      <label for=\"expectedReturnDate\">Thời gian trả xe</label>\r\n                      <input type=\"date\" id=\"expectedReturnDate\" name=\"expectedReturnDate\" required>\r\n                          <label for=\"paymentMethod\">Phương thức thanh toán</label>\r\n                          <select name=\"paymentMethod\" id=\"paymentMethod\" required>\r\n                              <option value=\"momo\">Thanh toán bằng MoMo</option>\r\n                              <option value=\"cod\">Thanh toán khi nhận xe</option>\r\n                              <option value=\"vnpay\"Thanh toán bằng Vnpay</option>\r\n                          </select>\r\n                      <div class=\"fill-in-item\">\r\n                          <h3 id=\"totalPrice\">Tổng tiền thuê: 0 đ</h3>\r\n                      </div>\r\n\r\n                        <label for=\"coupon\">Mã giảm giá</label>\r\n                        <input type=\"text\" id=\"coupon\" name=\"coupon\">\r\n                        <label for=\"location\">Địa điểm giao xe</label>\r\n                        <input type=\"text\" id=\"location\" name=\"location\" required>\r\n                        <label for=\"rentalStartDate\">Thời gian nhận xe</label>\r\n                        <input type=\"date\" id=\"rentalStartDate\" name=\"rentalStartDate\" required>\r\n                        <label for=\"expectedReturnDate\">Thời gian trả xe</label>\r\n                        <input type=\"date\" id=\"expectedReturnDate\" name=\"expectedReturnDate\" required>\r\n                        <div class=\"fill-in-item\">\r\n                            <h3 id=\"totalPrice\">Tổng tiền thuê: 0 đ</h3>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div class=\"button\">\r\n                        <button type=\"submit\">Đặt xe</button>\r\n                        <%--                        <a href=\"add-cart?pid=${p.id}\"><button type=\"button\" onclick=\"alert('Bạn đã thêm vào giỏ hàng thành công.')\">Thêm vào giỏ hàng</button></a>--%>\r\n                        <button type=\"button\" onclick=\"alert('Bạn đã thêm vào giỏ hàng thành công.')\"><a href=\"add-cart?pid=${p.id}\">Thêm vào giỏ hàng</a></button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n\r\n        <div class=\"products-detailed-information\">\r\n            <h1 class=\"product-title\">Mô tả / Đánh giá chi tiết</h1>\r\n            <div class=\"product-description\">\r\n                <p>${p.description}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <h3>Viết bình luận</h3>\r\n    <c:if test=\"${user != null}\">\r\n        <form action=\"CommentController\" method=\"post\">\r\n            <input type=\"hidden\" name=\"product_id\" value=\"${productId}\">\r\n            <textarea name=\"comment\" placeholder=\"Viết bình luận...\" required></textarea><br><br>\r\n            <button type=\"submit\">Gửi bình luận</button>\r\n        </form>\r\n    </c:if>\r\n    <c:if test=\"${user == null}\">\r\n        <p>Bạn cần <a href=\"login.jsp\">đăng nhập</a> để bình luận.</p>\r\n    </c:if>\r\n\r\n    <h3>Các bình luận</h3>\r\n    <c:forEach var=\"c\" items=\"${comments}\">\r\n        <p><b>${c.username}</b>: ${c.comment} <i>(${c.createdAt})</i></p>\r\n        <hr>\r\n    </c:forEach>\r\n    <c:if test=\"${empty comments}\">\r\n        <p>Chưa có bình luận nào cho sản phẩm này.</p>\r\n    </c:if>\r\n\r\n</div>\r\n</div>\r\n\r\n<%--<div class=\"cac-san-pham-khac\">--%>\r\n<%--    <h1>Các sản phẩm tương tự</h1>--%>\r\n<%--<c:forEach var=\"relatedProduct\" items=\"${relatedProducts}\">--%>\r\n<%--    <div id=\"wrapper\">--%>\r\n<%--        <div class=\"headline\">--%>\r\n<%--            <ul class=\"products\">--%>\r\n<%--                <li>--%>\r\n<%--                    <div class=\"product-item\">--%>\r\n<%--                        <div class=\"product-top\">--%>\r\n<%--                            <a href=\"\" class=\"product-thumb\">--%>\r\n<%--                                <img src=\"${relatedProduct.img}\" alt=\"\">--%>\r\n<%--                            </a>--%>\r\n<%--                            <!--Mua ngay-->--%>\r\n<%--                            <a href=\"/product?pid=${relatedProduct.id}\" class=\"buy-now\">Đặt ngay</a>--%>\r\n<%--                          </div>--%>\r\n<%--                        <div class=\"product-info\">--%>\r\n<%--                            <a href=\"\" class=\"product-cat\"> ${relatedProduct.type}</a>--%>\r\n<%--                            <a href=\"\" class=\"product-name\"> ${relatedProduct.name}</a>--%>\r\n<%--                            <div class=\"product-price\"><f:formatNumber value=\"${relatedProduct.price}\"/></div>--%>\r\n<%--                        </div>--%>\r\n<%--                    </div>--%>\r\n<%--                </li>--%>\r\n<%--            </ul>--%>\r\n<%--        </div>--%>\r\n<%--    </div >--%>\r\n<%--</c:forEach>--%>\r\n<%--</div>--%>\r\n\r\n<c:if test=\"${param.message == 'success'}\">\r\n    <script>alert(\"Đặt xe thành công!\");</script>\r\n</c:if>\r\n<c:if test=\"${param.message == 'fail'}\">\r\n    <script>alert(\"Đặt xe thất bại. Vui lòng thử lại!\");</script>\r\n</c:if>\r\n\r\n\r\n\r\n\r\n\r\n<%@ include file=\"footer.jsp\" %>\r\n</body>\r\n</html>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/product-detail.jsp b/src/main/webapp/product-detail.jsp
--- a/src/main/webapp/product-detail.jsp	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/src/main/webapp/product-detail.jsp	(date 1746713437705)
@@ -8,8 +8,8 @@
   To change this template use File | Settings | File Templates.
 --%>
 <%@ page contentType="text/html;charset=UTF-8" language="java" %>
-<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core" %>
-<%@ taglib prefix = "f" uri = "http://java.sun.com/jsp/jstl/fmt" %>
+<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
+<%@ taglib prefix="f" uri="http://java.sun.com/jsp/jstl/fmt" %>
 <!DOCTYPE html>
 <html lang="vi">
 <head>
@@ -36,50 +36,49 @@
                 <input type="hidden" name="price" value="${p.price}">
                 <div class="info">
                     <h1 class="name-moto" style="text-align: center">${p.name}</h1>
-                    <h3 id="price-per-day">Giá thuê: <f:formatNumber value="${p.price}" />đ/ngày</h3>
+                    <h3 id="price-per-day">Giá thuê: <f:formatNumber value="${p.price}"/>đ/ngày</h3>
                     <h3 id="manufacturer">Nhà sản xuất: ${p.brand}</h3>
                     <h3 id="year-of-manufacture">Năm sản xuất: ${p.year}</h3>
                     <h3 id="type">Loại xe: Xe số</h3>
-                    <p class="note">* Giá thuê chưa bao gồm: Xăng phục vụ suốt chuyến đi, Bảo hiểm hành khách, Thuế VAT, Phụ thu dịp Lễ Tết.</p>
+                    <p class="note">* Giá thuê chưa bao gồm: Xăng phục vụ suốt chuyến đi, Bảo hiểm hành khách, Thuế VAT,
+                        Phụ thu dịp Lễ Tết.</p>
                 </div>
                 <div class="fill-in-info">
                     <div class="fill-in-item">
 
-                      <%--@declare id="paymentmethods"--%><label for="coupon">Mã giảm giá</label>
-                      <input type="text" id="coupon" name="coupon">
-                      <label for="location">Địa điểm giao xe</label>
-                      <input type="text" id="location" name="location" required>
-                      <label for="rentalStartDate">Thời gian nhận xe</label>
-                      <input type="date" id="rentalStartDate" name="rentalStartDate" required>
-                      <label for="expectedReturnDate">Thời gian trả xe</label>
-                      <input type="date" id="expectedReturnDate" name="expectedReturnDate" required>
-                          <label for="paymentMethod">Phương thức thanh toán</label>
-                          <select name="paymentMethod" id="paymentMethod" required>
-                              <option value="momo">Thanh toán bằng MoMo</option>
-                              <option value="cod">Thanh toán khi nhận xe</option>
-                              <option value="vnpay"Thanh toán bằng Vnpay</option>
-                          </select>
-                      <div class="fill-in-item">
-                          <h3 id="totalPrice">Tổng tiền thuê: 0 đ</h3>
-                      </div>
-
-                        <label for="coupon">Mã giảm giá</label>
-                        <input type="text" id="coupon" name="coupon">
-                        <label for="location">Địa điểm giao xe</label>
-                        <input type="text" id="location" name="location" required>
-                        <label for="rentalStartDate">Thời gian nhận xe</label>
-                        <input type="date" id="rentalStartDate" name="rentalStartDate" required>
-                        <label for="expectedReturnDate">Thời gian trả xe</label>
-                        <input type="date" id="expectedReturnDate" name="expectedReturnDate" required>
+                        <%--@declare id="paymentmethods"--%><label for="coupon">Mã giảm giá</label>
+                        <input type="text" id="coupon" name="coupon">
+                        <label for="location">Địa điểm giao xe</label>
+                        <input type="text" id="location" name="location" required>
+                        <label for="rentalStartDate">Thời gian nhận xe</label>
+                        <input type="date" id="rentalStartDate" name="rentalStartDate" required>
+                        <label for="expectedReturnDate">Thời gian trả xe</label>
+                        <input type="date" id="expectedReturnDate" name="expectedReturnDate" required>
+                        <label for="deliveryOption">Đơn vị vận chuyển</label>
+                        <select name="deliveryOption" id="deliveryOption" onchange="updateDeliveryFee()" required>
+                            <option value="grab">Tiết kiệm - 30.000đ</option>
+                            <option value="ghn">Giao Hàng Nhanh - 35.000đ</option>
+                            <option value="pickup">Nhận tại cửa hàng - Miễn phí</option>
+                        </select>
+
+                        <label for="deliveryFee">Phí vận chuyển</label>
+                        <input type="text" id="deliveryFee" name="deliveryFee" readonly value="30000">
+
+                        <label for="paymentMethod">Phương thức thanh toán</label>
+                        <select name="paymentMethod" id="paymentMethod" required>
+                            <option value="cod">Thanh toán khi nhận xe</option>
+                        </select>
                         <div class="fill-in-item">
-                            <h3 id="totalPrice">Tổng tiền thuê: 0 đ</h3>
+                            <h3 id="totalPrice">Tổng tiền thuê + vận chuyển: 0 đ</h3>
                         </div>
 
+
                     </div>
                     <div class="button">
                         <button type="submit">Đặt xe</button>
                         <%--                        <a href="add-cart?pid=${p.id}"><button type="button" onclick="alert('Bạn đã thêm vào giỏ hàng thành công.')">Thêm vào giỏ hàng</button></a>--%>
-                        <button type="button" onclick="alert('Bạn đã thêm vào giỏ hàng thành công.')"><a href="add-cart?pid=${p.id}">Thêm vào giỏ hàng</a></button>
+                        <button type="button" onclick="alert('Bạn đã thêm vào giỏ hàng thành công.')"><a
+                                href="add-cart?pid=${p.id}">Thêm vào giỏ hàng</a></button>
                     </div>
                 </div>
             </form>
@@ -148,15 +147,52 @@
 <%--</div>--%>
 
 <c:if test="${param.message == 'success'}">
-    <script>alert("Đặt xe thành công!");</script>
+    <script>
+        alert("Đặt xe thành công!");
+        // Sau khi thông báo, tự động chuyển trang sau 2 giây
+        setTimeout(function() {
+            window.location.href = "order-status.jsp?userId=${user.id}";
+        }, 2000);
+    </script>
 </c:if>
 <c:if test="${param.message == 'fail'}">
     <script>alert("Đặt xe thất bại. Vui lòng thử lại!");</script>
 </c:if>
 
+<script>
+    function updateDeliveryFee() {
+        var deliveryOption = document.getElementById("deliveryOption").value;
+        var deliveryFeeInput = document.getElementById("deliveryFee");
+
+        if (deliveryOption === "grab") {
+            deliveryFeeInput.value = 30000;
+        } else if (deliveryOption === "ghn") {
+            deliveryFeeInput.value = 35000;
+        } else {
+            deliveryFeeInput.value = 0;
+        }
 
+        updateTotalPrice();
+    }
 
+    function updateTotalPrice() {
+        const pricePerDay = parseFloat(document.querySelector('input[name="price"]').value);
+        const deliveryFee = parseFloat(document.getElementById("deliveryFee").value);
+        const start = new Date(document.getElementById("rentalStartDate").value);
+        const end = new Date(document.getElementById("expectedReturnDate").value);
 
+        if (!isNaN(start.getTime()) && !isNaN(end.getTime())) {
+            const days = Math.max(1, (end - start) / (1000 * 3600 * 24));
+            const total = pricePerDay * days + deliveryFee;
+
+            document.getElementById("totalPrice").textContent = "Tổng tiền thuê: " + total.toLocaleString('vi-VN') + " đ";
+        }
+    }
+
+    // Tự động cập nhật khi chọn ngày
+    document.getElementById("rentalStartDate").addEventListener("change", updateTotalPrice);
+    document.getElementById("expectedReturnDate").addEventListener("change", updateTotalPrice);
+</script>
 
 <%@ include file="footer.jsp" %>
 </body>
Index: src/main/webapp/cart.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%--\r\n  Created by IntelliJ IDEA.\r\n  User: DELL\r\n  Date: 1/10/2025\r\n  Time: 11:59 AM\r\n  To change this template use File | Settings | File Templates.\r\n--%>\r\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Giỏ hàng</title>\r\n  <link rel=\"stylesheet\" href=\"assets/css/base.css\">\r\n  <link rel=\"stylesheet\" href=\"cart.css\">\r\n  <link rel=\"stylesheet\" href=\"assets/fonts/fontawesome-free-6.6.0-web/fontawesome-free-6.6.0-web/css/all.css\">\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css\">\r\n</head>\r\n\r\n<body>\r\n<header id=\"header\"></header>\r\n<!-- section 1 -->\r\n<div id=\"sec1\">\r\n  <hr>\r\n  <div class=\"container border\">\r\n    <h1><strong>Giỏ Hàng Của Bạn (5 Sản Phẩm)</strong></h1>\r\n\r\n    <!-- Giỏ hàng -->\r\n    <div class=\"row\">\r\n\r\n      <!-- col left -->\r\n      <div class=\"col-left\">\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__product\">\r\n\r\n            <img src=\"assets/img/home_img/xe/xe1.jpg\" class=\"cart-img\">\r\n            <p><strong>Yamaha Nozza</strong></p>\r\n            <i class=\"cart-icon fa-regular fa-pen-to-square fa-xl\"></i>\r\n            <input type=\"number\" class=\"form-control\" value=\"1\" min=\"1\" max=\"5\">\r\n\r\n            <p><strong>80,000 VND/ngày</strong></p>\r\n            <i class=\"cart-icon fa-solid fa-trash fa-xl\"></i>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__product\">\r\n            <img src=\"assets/img/home_img/xe/xe2.jpg\" class=\"cart-img\">\r\n            <p><strong>Honda Vision</strong></p>\r\n            <i class=\"cart-icon fa-regular fa-pen-to-square fa-xl\"></i>\r\n            <input type=\"number\" class=\"form-control\" value=\"1\" min=\"1\" max=\"5\">\r\n\r\n            <p><strong>90,000 VND/ngày</strong></p>\r\n            <i class=\"cart-icon fa-solid fa-trash fa-xl\"></i>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__product\">\r\n            <img src=\"assets/img/home_img/xe/xe3.jpg\" class=\"cart-img\">\r\n            <p><strong>Honda Wave RSX</strong></p>\r\n            <i class=\"cart-icon fa-regular fa-pen-to-square fa-xl\"></i>\r\n            <input type=\"number\" class=\"form-control\" value=\"1\" min=\"1\" max=\"5\">\r\n\r\n            <p><strong>50,000 VND/ngày</strong></p>\r\n            <i class=\"cart-icon fa-solid fa-trash fa-xl\"></i>\r\n          </div>\r\n        </div>\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__product\">\r\n            <img src=\"assets/img/home_img/xe/xe4.jpg\" class=\"cart-img\">\r\n            <p><strong>Sirius RC</strong></p>\r\n            <i class=\"cart-icon fa-regular fa-pen-to-square fa-xl\"></i>\r\n            <input type=\"number\" class=\"form-control\" value=\"1\" min=\"1\" max=\"5\">\r\n\r\n            <p><strong>50,000 VND/ngày</strong></p>\r\n            <i class=\"cart-icon fa-solid fa-trash fa-xl\"></i>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"cart-item\">\r\n          <div class=\"cart-item__product\">\r\n            <img src=\"assets/img/home_img/xe/xe5.jpg\" class=\"cart-img\">\r\n            <p><strong>Liberty</strong></p>\r\n            <i class=\"cart-icon fa-regular fa-pen-to-square fa-xl\"></i>\r\n            <input type=\"number\" class=\"form-control\" value=\"1\" min=\"1\" max=\"5\">\r\n            <p><strong>90,000 VND/ngày</strong></p>\r\n            <i class=\"cart-icon fa-solid fa-trash fa-xl\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- col right -->\r\n      <div class=\"col-right\">\r\n        <form class=\"rental-information\" action=\"/submit-rental\" method=\"post\">\r\n          <div class=\"info\">\r\n            <p class=\"note\" style=\"font-size: 1.4rem\">*Giá thuê chưa bao gồm: Xăng phục vụ suốt chuyến đi, Bảo hiểm hành khách, Thuế VAT, Phụ thu dịp Lễ Tết.</p>\r\n          </div>\r\n          <div class=\"fill-in-info\">\r\n            <div class=\"fill-in-item\">\r\n              <label for=\"coupon\">Mã giảm giá</label>\r\n              <input type=\"text\" id=\"coupon\" name=\"coupon\">\r\n              <label for=\"delivery-location\">Địa điểm giao xe</label>\r\n              <input type=\"text\" id=\"delivery-location\" name=\"delivery-location\" required>\r\n              <label for=\"delivery-time\">Thời gian nhận xe</label>\r\n              <input type=\"date\" id=\"delivery-time\" name=\"delivery-time\" required>\r\n              <label for=\"return-time\">Thời gian trả xe</label>\r\n              <input type=\"date\" id=\"return-time\" name=\"return-time\" required>\r\n            </div>\r\n            <div class=\"button\">\r\n              <button type=\"submit\" style=\"width: 100%\">Đặt xe</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n<footer id=\"footer\"></footer>\r\n<script>\r\n  // Chèn header\r\n  fetch('header.html')\r\n          .then(response => response.text())\r\n          .then(data => document.getElementById('header').innerHTML = data);\r\n\r\n  // Chèn footer\r\n  fetch('footer.html')\r\n          .then(response => response.text())\r\n          .then(data => document.getElementById('footer').innerHTML = data);\r\n</script>\r\n\r\n</body>\r\n</html>\r\n<%--test--%>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/cart.jsp b/src/main/webapp/cart.jsp
--- a/src/main/webapp/cart.jsp	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/src/main/webapp/cart.jsp	(date 1746691713861)
@@ -121,12 +121,12 @@
 <footer id="footer"></footer>
 <script>
   // Chèn header
-  fetch('header.html')
+  fetch('header.jsp')
           .then(response => response.text())
           .then(data => document.getElementById('header').innerHTML = data);
 
   // Chèn footer
-  fetch('footer.html')
+  fetch('footer.jsp')
           .then(response => response.text())
           .then(data => document.getElementById('footer').innerHTML = data);
 </script>
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"demo:war\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"afc77a48-b48e-48b7-9561-ce0e97a73903\" name=\"Changes\" comment=\"Fixes #27 : xác minh tai khoan\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/misc.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/misc.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/webContexts.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/webContexts.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/login-google.jsp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/login-google.jsp\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Servlet\" />\r\n        <option value=\"JavaScript File\" />\r\n        <option value=\"CSS File\" />\r\n        <option value=\"Jsp File\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"main\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;history&quot;: [\r\n    {\r\n      &quot;state&quot;: &quot;OPEN&quot;,\r\n      &quot;assignee&quot;: &quot;lamnhat1104&quot;,\r\n      &quot;author&quot;: &quot;thuylinh22130145&quot;\r\n    }\r\n  ],\r\n  &quot;lastFilter&quot;: {}\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/lamnhat1104/T-T-WEB.git&quot;,\r\n    &quot;accountId&quot;: &quot;2d98ba9b-cf9c-4d93-b35a-bc8a5e6f2a0f&quot;\r\n  },\r\n  &quot;recentNewPullRequestHead&quot;: {\r\n    &quot;server&quot;: {\r\n      &quot;useHttp&quot;: false,\r\n      &quot;host&quot;: &quot;github.com&quot;,\r\n      &quot;port&quot;: null,\r\n      &quot;suffix&quot;: null\r\n    },\r\n    &quot;owner&quot;: &quot;lamnhat1104&quot;,\r\n    &quot;repository&quot;: &quot;T-T-WEB&quot;\r\n  }\r\n}</component>\r\n  <component name=\"LogFilters\">\r\n    <option name=\"FILTER_ERRORS\" value=\"false\" />\r\n    <option name=\"FILTER_WARNINGS\" value=\"false\" />\r\n    <option name=\"FILTER_INFO\" value=\"true\" />\r\n    <option name=\"FILTER_DEBUG\" value=\"true\" />\r\n    <option name=\"CUSTOM_FILTER\" />\r\n  </component>\r\n  <component name=\"MavenImportPreferences\">\r\n    <option name=\"generalSettings\">\r\n      <MavenGeneralSettings>\r\n        <option name=\"mavenHomeTypeForPersistence\" value=\"WRAPPER\" />\r\n      </MavenGeneralSettings>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n    &quot;associatedIndex&quot;: 8\r\n    }</component>\r\n  <component name=\"ProjectId\" id=\"2ttS7m6eAoESVQAeTdN9rCw0G9R\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;Application.CommentDao.executor&quot;: &quot;Run&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,\r\n    &quot;Tomcat Server.Tomcat 10.1.39.executor&quot;: &quot;Run&quot;,\r\n    &quot;Tomcat Server.Tomcat 11.0.0.executor&quot;: &quot;Run&quot;,\r\n    &quot;Tomcat Server.tomcat.executor&quot;: &quot;Run&quot;,\r\n    &quot;git-widget-placeholder&quot;: &quot;22130145-TRanThiThuyLinh&quot;,\r\n    &quot;ignore.virus.scanning.warn.message&quot;: &quot;true&quot;,\r\n    &quot;junie.onboarding.icon.badge.shown&quot;: &quot;true&quot;,\r\n    &quot;kotlin-language-version-configured&quot;: &quot;true&quot;,\r\n    &quot;list.type.of.created.stylesheet&quot;: &quot;CSS&quot;,\r\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;preferences.pluginManager&quot;,\r\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\HK1_2024\\T-T-WEB\\DoAnCuoiKi\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration default=\"true\" type=\"JetRunConfigurationType\">\r\n      <module name=\"T-T-WEB\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration default=\"true\" type=\"KotlinStandaloneScriptRunConfigurationType\">\r\n      <module name=\"T-T-WEB\" />\r\n      <option name=\"filePath\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"Tomcat 10.1.39\" type=\"#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory\" factoryName=\"Local\" APPLICATION_SERVER_NAME=\"Tomcat 10.1.39\" ALTERNATIVE_JRE_ENABLED=\"false\" nameIsGenerated=\"true\">\r\n      <option name=\"BROWSER_ID\" value=\"37cae5b9-e8b2-4949-9172-aafa37fbc09c\" />\r\n      <option name=\"UPDATING_POLICY\" value=\"restart-server\" />\r\n      <deployment>\r\n        <artifact name=\"demo:war\">\r\n          <settings>\r\n            <option name=\"CONTEXT_PATH\" value=\"/demo_war\" />\r\n          </settings>\r\n        </artifact>\r\n      </deployment>\r\n      <server-settings>\r\n        <option name=\"BASE_DIRECTORY_NAME\" value=\"3810932d-a968-402b-b870-29477767e09f\" />\r\n      </server-settings>\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat\" />\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat Catalina\" />\r\n      <predefined_log_file id=\"Tomcat Manager\" />\r\n      <predefined_log_file id=\"Tomcat Host Manager\" />\r\n      <predefined_log_file id=\"Tomcat Localhost Access\" />\r\n      <RunnerSettings RunnerId=\"Debug\">\r\n        <option name=\"DEBUG_PORT\" value=\"59512\" />\r\n      </RunnerSettings>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Cover\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Debug\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Profile\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Run\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n        <option name=\"BuildArtifacts\" enabled=\"true\">\r\n          <artifact name=\"demo:war\" />\r\n        </option>\r\n      </method>\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-jdk-9823dce3aa75-fbdcb00ec9e3-intellij.indexing.shared.core-IU-251.23774.435\" />\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-f27c65a3e318-JavaScript-IU-251.23774.435\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"afc77a48-b48e-48b7-9561-ce0e97a73903\" name=\"Changes\" comment=\"Fixes #18 : đã làm, Fixes #24 : Đã làm, Fixes #28 : đã làm\" />\r\n      <created>1743745088672</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1743745088672</updated>\r\n      <workItem from=\"1741169714023\" duration=\"239000\" />\r\n      <workItem from=\"1741169961877\" duration=\"1777000\" />\r\n      <workItem from=\"1741333783390\" duration=\"74000\" />\r\n      <workItem from=\"1741620876498\" duration=\"6688000\" />\r\n      <workItem from=\"1741751301146\" duration=\"686000\" />\r\n      <workItem from=\"1741752859974\" duration=\"52000\" />\r\n      <workItem from=\"1741769182254\" duration=\"1976000\" />\r\n      <workItem from=\"1741772193633\" duration=\"1839000\" />\r\n      <workItem from=\"1741796927948\" duration=\"3747000\" />\r\n      <workItem from=\"1741880630804\" duration=\"9584000\" />\r\n      <workItem from=\"1741943389979\" duration=\"8448000\" />\r\n      <workItem from=\"1742055138737\" duration=\"3313000\" />\r\n      <workItem from=\"1742091047789\" duration=\"18219000\" />\r\n      <workItem from=\"1742204074511\" duration=\"6829000\" />\r\n      <workItem from=\"1742398921704\" duration=\"613000\" />\r\n      <workItem from=\"1742439056941\" duration=\"2555000\" />\r\n      <workItem from=\"1742449060926\" duration=\"3619000\" />\r\n      <workItem from=\"1742490753673\" duration=\"2393000\" />\r\n      <workItem from=\"1742534504940\" duration=\"4501000\" />\r\n      <workItem from=\"1742567258792\" duration=\"6620000\" />\r\n      <workItem from=\"1742605788577\" duration=\"7155000\" />\r\n      <workItem from=\"1742659929769\" duration=\"1482000\" />\r\n      <workItem from=\"1742745244516\" duration=\"1207000\" />\r\n      <workItem from=\"1742805697371\" duration=\"13324000\" />\r\n      <workItem from=\"1742957488408\" duration=\"5970000\" />\r\n      <workItem from=\"1742973882346\" duration=\"11667000\" />\r\n      <workItem from=\"1743045131044\" duration=\"5295000\" />\r\n      <workItem from=\"1743051350328\" duration=\"334000\" />\r\n      <workItem from=\"1743561538465\" duration=\"5009000\" />\r\n      <workItem from=\"1743664195166\" duration=\"6454000\" />\r\n      <workItem from=\"1743692216814\" duration=\"689000\" />\r\n      <workItem from=\"1743744793980\" duration=\"4668000\" />\r\n      <workItem from=\"1743842254412\" duration=\"673000\" />\r\n      <workItem from=\"1743865327182\" duration=\"330000\" />\r\n      <workItem from=\"1743908015725\" duration=\"2171000\" />\r\n      <workItem from=\"1743912267620\" duration=\"1197000\" />\r\n      <workItem from=\"1744449699318\" duration=\"2937000\" />\r\n      <workItem from=\"1743745092318\" duration=\"4760000\" />\r\n      <workItem from=\"1743828841669\" duration=\"4758000\" />\r\n      <workItem from=\"1743950328059\" duration=\"1862000\" />\r\n      <workItem from=\"1744029635855\" duration=\"309000\" />\r\n      <workItem from=\"1744029965530\" duration=\"2692000\" />\r\n      <workItem from=\"1744033320650\" duration=\"5972000\" />\r\n      <workItem from=\"1744084279670\" duration=\"6023000\" />\r\n      <workItem from=\"1744091560944\" duration=\"27000\" />\r\n      <workItem from=\"1744092611125\" duration=\"5874000\" />\r\n      <workItem from=\"1744256047185\" duration=\"4925000\" />\r\n      <workItem from=\"1744261019722\" duration=\"3821000\" />\r\n      <workItem from=\"1744289180191\" duration=\"150000\" />\r\n      <workItem from=\"1744289365216\" duration=\"7662000\" />\r\n      <workItem from=\"1744989900432\" duration=\"1090000\" />\r\n      <workItem from=\"1745326174673\" duration=\"2018000\" />\r\n      <workItem from=\"1745494620368\" duration=\"2138000\" />\r\n      <workItem from=\"1745729370920\" duration=\"1605000\" />\r\n      <workItem from=\"1745731943960\" duration=\"1290000\" />\r\n      <workItem from=\"1745747225082\" duration=\"1636000\" />\r\n      <workItem from=\"1746023360425\" duration=\"406000\" />\r\n      <workItem from=\"1746023785944\" duration=\"988000\" />\r\n      <workItem from=\"1746025894467\" duration=\"1680000\" />\r\n      <workItem from=\"1746109260372\" duration=\"6698000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Fixes #42 :trang về chúng tôi và trang tin tức\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1743745437506</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1743745437506</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Fixes #39 : sửa lại lỗi trang tin tức\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1743745640737</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1743745640737</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Fixes #49 :đăng nhập bằng facebook\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1743950901388</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1743950901388</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Fixes #49 :đăng nhập bằng facebook\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744034383436</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744034383436</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"Fixes #49 :đăng nhập bằng facebook\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744036871023</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744036871023</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"Fixes #52 :đăng Ký lái thử\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744039506120</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744039506120</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"Fixes #52 :đăng Ký lái thử\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744086203986</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744086203987</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"Fixes #49 :đăng nhâp bằng facebook\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744090281060</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744090281061</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Fixes #56 :chat trực tiếp với admin qua mess\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744102960882</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1744102960882</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"Fixes #52: cập nhật đăng ký lái thử\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1744260066574</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1741975090141</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"fix lỗi\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1741975347907</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1741975347907</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"chỉnh sửa đơn đặt hàng\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742116192191</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742116192191</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"chỉnh sửa đơn đặt hàng\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742116790048</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742116790048</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"chức năng xóa khách hàng, xóa xe máy\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742231293776</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742231293776</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"chức năng xóa khách hàng\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742445148547</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742445148547</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"chức năng cập nhật khách hàng\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742534612316</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742534612316</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"chức năng xóa xe\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742535166212</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742535166212</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"quản lý khuyến mãi\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742539004863</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742539004863</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"liên kết admin, quản lý khuyến mãi\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742660712166</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742660712166</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00020\" summary=\"liên kết admin, quản lý khuyến mãi\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742660733033</created>\r\n      <option name=\"number\" value=\"00020\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742660733033</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00021\" summary=\"chức năng thêm khuyến mãi, xóa khuyến mãi\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742826364381</created>\r\n      <option name=\"number\" value=\"00021\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742826364381</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00022\" summary=\"thêm chức năng liên hệ, xóa liên hệ\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1742837376157</created>\r\n      <option name=\"number\" value=\"00022\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1742837376157</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00023\" summary=\"thêm chức năng cập nhật khách hàng\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1743049238774</created>\r\n      <option name=\"number\" value=\"00023\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00023\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1743049238774</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00024\" summary=\"Fixes #18 : đã làm, Fixes #24 : Đã làm, Fixes #28 : đã làm\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1743692510480</created>\r\n      <option name=\"number\" value=\"00024\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00024\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1743692510480</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00025\" summary=\"Fixes #27 : xác minh tai khoan\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1745327586268</created>\r\n      <option name=\"number\" value=\"00025\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00025\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1745327586268</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00026\" summary=\"Fixes #27 : xác minh tai khoan\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1746026847008</created>\r\n      <option name=\"number\" value=\"00026\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00026\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1746026847008</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"27\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"commit\" />\r\n    <MESSAGE value=\"thay đổi mật khẩu ưngs dụng\" />\r\n    <MESSAGE value=\"giỏ hàng\" />\r\n    <MESSAGE value=\"fix lỗi chuyển trang\" />\r\n    <MESSAGE value=\"css form đặt hàng\" />\r\n    <MESSAGE value=\"fix lỗi\" />\r\n    <MESSAGE value=\"chỉnh sửa đơn đặt hàng\" />\r\n    <MESSAGE value=\"chức năng xóa khách hàng, xóa xe máy\" />\r\n    <MESSAGE value=\"chức năng xóa khách hàng\" />\r\n    <MESSAGE value=\"chức năng cập nhật khách hàng\" />\r\n    <MESSAGE value=\"chức năng xóa xe\" />\r\n    <MESSAGE value=\"quản lý khuyến mãi\" />\r\n    <MESSAGE value=\"liên kết admin, quản lý khuyến mãi\" />\r\n    <MESSAGE value=\"chức năng thêm khuyến mãi, xóa khuyến mãi\" />\r\n    <MESSAGE value=\"thêm chức năng liên hệ, xóa liên hệ\" />\r\n    <MESSAGE value=\"thêm chức năng cập nhật khách hàng\" />\r\n    <MESSAGE value=\"Fixes #18 : đã làm, Fixes #24 : Đã làm, Fixes #28 : đã làm\" />\r\n    <MESSAGE value=\"Fixes #42 :trang về chúng tôi và trang tin tức\" />\r\n    <MESSAGE value=\"Fixes #39 : sửa lại lỗi trang tin tức\" />\r\n    <MESSAGE value=\"Fixes #49 :đăng nhập bằng facebook\" />\r\n    <MESSAGE value=\"Fixes #52 :đăng Ký lái thử\" />\r\n    <MESSAGE value=\"Fixes #49 :đăng nhâp bằng facebook\" />\r\n    <MESSAGE value=\"Fixes #56 :chat trực tiếp với admin qua mess\" />\r\n    <MESSAGE value=\"Fixes #52: cập nhật đăng ký lái thử\" />\r\n    <MESSAGE value=\"Fixes #27 : xác minh tai khoan\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Fixes #27 : xác minh tai khoan\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/.idea/workspace.xml	(date 1746850433328)
@@ -9,11 +9,23 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="afc77a48-b48e-48b7-9561-ce0e97a73903" name="Changes" comment="Fixes #27 : xác minh tai khoan">
-      <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
+    <list default="true" id="afc77a48-b48e-48b7-9561-ce0e97a73903" name="Changes" comment="Fixes #70 : đăng nhập bằng google">
+      <change afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/FacebookLoginServlet.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/Order.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/webapp/order-status.jsp" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/webapp/saveOrder.jsp" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/webapp/đat_xe_thanh_cong.jsp" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/webContexts.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/webContexts.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/login-google.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/login-google.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/AdminController.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/OrderDao.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/UserDao.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/dao/UserDao.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/model/User.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/model/User.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/cart.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/cart.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/login-facebook.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/login-facebook.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/login.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/login.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/product-detail.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/product-detail.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/saveUser.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/saveUser.jsp" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -292,7 +304,12 @@
       <workItem from="1746023360425" duration="406000" />
       <workItem from="1746023785944" duration="988000" />
       <workItem from="1746025894467" duration="1680000" />
-      <workItem from="1746109260372" duration="6698000" />
+      <workItem from="1746109260372" duration="6899000" />
+      <workItem from="1746329198249" duration="3211000" />
+      <workItem from="1746512159922" duration="844000" />
+      <workItem from="1746683162425" duration="7339000" />
+      <workItem from="1746711294071" duration="4020000" />
+      <workItem from="1746768815446" duration="6686000" />
     </task>
     <task id="LOCAL-00001" summary="Fixes #42 :trang về chúng tôi và trang tin tức">
       <option name="closed" value="true" />
@@ -502,7 +519,15 @@
       <option name="project" value="LOCAL" />
       <updated>1746026847008</updated>
     </task>
-    <option name="localTasksCounter" value="27" />
+    <task id="LOCAL-00027" summary="Fixes #70 : đăng nhập bằng google">
+      <option name="closed" value="true" />
+      <created>1746116254341</created>
+      <option name="number" value="00027" />
+      <option name="presentableId" value="LOCAL-00027" />
+      <option name="project" value="LOCAL" />
+      <updated>1746116254343</updated>
+    </task>
+    <option name="localTasksCounter" value="28" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -520,7 +545,6 @@
     </option>
   </component>
   <component name="VcsManagerConfiguration">
-    <MESSAGE value="commit" />
     <MESSAGE value="thay đổi mật khẩu ưngs dụng" />
     <MESSAGE value="giỏ hàng" />
     <MESSAGE value="fix lỗi chuyển trang" />
@@ -545,6 +569,7 @@
     <MESSAGE value="Fixes #56 :chat trực tiếp với admin qua mess" />
     <MESSAGE value="Fixes #52: cập nhật đăng ký lái thử" />
     <MESSAGE value="Fixes #27 : xác minh tai khoan" />
-    <option name="LAST_COMMIT_MESSAGE" value="Fixes #27 : xác minh tai khoan" />
+    <MESSAGE value="Fixes #70 : đăng nhập bằng google" />
+    <option name="LAST_COMMIT_MESSAGE" value="Fixes #70 : đăng nhập bằng google" />
   </component>
 </project>
\ No newline at end of file
Index: src/main/webapp/đat_xe_thanh_cong.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/đat_xe_thanh_cong.jsp b/src/main/webapp/đat_xe_thanh_cong.jsp
new file mode 100644
--- /dev/null	(date 1746712496338)
+++ b/src/main/webapp/đat_xe_thanh_cong.jsp	(date 1746712496338)
@@ -0,0 +1,43 @@
+<%--
+  Created by IntelliJ IDEA.
+  User: ASUS
+  Date: 5/8/2025
+  Time: 8:54 PM
+  To change this template use File | Settings | File Templates.
+--%>
+<%@ page contentType="text/html;charset=UTF-8" %>
+<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
+<html>
+<head>
+    <title>Đặt xe thành công</title>
+    <style>
+        .success-message {
+            padding: 20px;
+            text-align: center;
+        }
+        .btn-view-order {
+            background-color: #28a745;
+            color: white;
+            padding: 10px 20px;
+            border: none;
+            text-decoration: none;
+            font-size: 16px;
+            border-radius: 5px;
+        }
+        .btn-view-order:hover {
+            background-color: #218838;
+        }
+    </style>
+</head>
+<body>
+<div class="success-message">
+    <h2>✅ Đặt xe thành công!</h2>
+    <p>Cảm ơn bạn đã sử dụng dịch vụ của chúng tôi.</p>
+
+    <!-- Nút chuyển đến trang tình trạng đơn hàng -->
+    <a href="order-status.jsp?userId=${sessionScope.user.id}" class="btn-view-order">
+        Xem tình trạng đơn hàng
+    </a>
+</div>
+</body>
+</html>
Index: src/main/webapp/order-status.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/order-status.jsp b/src/main/webapp/order-status.jsp
new file mode 100644
--- /dev/null	(date 1746714688652)
+++ b/src/main/webapp/order-status.jsp	(date 1746714688652)
@@ -0,0 +1,98 @@
+<%--
+  Created by IntelliJ IDEA.
+  User: ASUS
+  Date: 5/8/2025
+  Time: 8:48 PM
+  To change this template use File | Settings | File Templates.
+--%>
+<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
+<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
+<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
+<%@ page import="vn.edu.hcmuaf.fit.doancuoiki.dao.OrderDao" %>
+<%@ page import="vn.edu.hcmuaf.fit.doancuoiki.model.Order" %>
+<%@ page import="java.sql.Date" %>
+
+<html>
+<head>
+    <title>Kiểm tra trạng thái đơn hàng</title>
+    <link rel="stylesheet" type="text/css" href="styles.css">
+</head>
+<body>
+<h1>Kiểm tra trạng thái đơn hàng</h1>
+
+<!-- Form nhập orderId -->
+<form action="order-status.jsp" method="get">
+    <label for="orderId">Mã đơn hàng:</label>
+    <input type="text" id="orderId" name="orderId" required>
+    <button type="submit">Kiểm tra</button>
+</form>
+
+<hr/>
+
+<c:if test="${not empty param.orderId}">
+    <%
+        String orderIdStr = request.getParameter("orderId");
+        int orderId = Integer.parseInt(orderIdStr);
+        OrderDao orderDao = new OrderDao();
+        Order order = orderDao.getOrderById(orderId);
+        request.setAttribute("order", order); // Lấy đơn hàng theo ID
+    %>
+
+    <c:if test="${not empty order}">
+        <h2>Thông tin đơn hàng</h2>
+        <table border="1">
+            <tr>
+                <th>Mã đơn hàng</th>
+                <td>${order.id}</td>
+            </tr>
+            <tr>
+                <th>Khách hàng</th>
+                <td>${order.customerId}</td>
+            </tr>
+            <tr>
+                <th>Địa chỉ giao xe</th>
+                <td>${order.deliveryAddress}</td>
+            </tr>
+            <tr>
+                <th>Ngày thuê</th>
+                <td>${order.rentalStartDate}</td>
+            </tr>
+            <tr>
+                <th>Ngày trả</th>
+                <td>${order.expectedReturnDate}</td>
+            </tr>
+            <tr>
+                <th>Xe thuê</th>
+                <td>${order.orderDetail.licensePlate}</td>
+            </tr>
+            <tr>
+                <th>Giá thuê</th>
+                <td>${order.orderDetail.priceAtOrder}</td>
+            </tr>
+            <tr>
+                <th>Khuyến mãi</th>
+                <td>${order.promotion.promotionName}</td>
+            </tr>
+            <tr>
+                <th>Trạng thái</th>
+                <td>
+                    <c:choose>
+                        <c:when test="${order.status == 1}">Đang chờ</c:when>
+                        <c:when test="${order.status == 2}">Đã xác nhận</c:when>
+                        <c:when test="${order.status == 3}">Đã giao xe</c:when>
+                        <c:when test="${order.status == 4}">Đã huỷ</c:when>
+                        <c:otherwise>Không xác định</c:otherwise>
+                    </c:choose>
+                </td>
+            </tr>
+        </table>
+    </c:if>
+
+
+    <c:if test="${empty order}">
+        <p>Không tìm thấy đơn hàng với mã đơn hàng: ${orderId}</p>
+    </c:if>
+</c:if>
+</body>
+</html>
+
Index: .idea/webContexts.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"WebContextManager\">\r\n    <option name=\"state\">\r\n      <map>\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/account.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/admin/customers.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp/admin\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/admin/motorbikes.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp/admin\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/index.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/lich-su-thue-xe.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/login-google.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/login.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/saveUser.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n        <entry key=\"file://$PROJECT_DIR$/src/main/webapp/signin.jsp\" value=\"file://$PROJECT_DIR$/src/main/webapp\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/webContexts.xml b/.idea/webContexts.xml
--- a/.idea/webContexts.xml	(revision 0d7de2147e73b12fe002a793e0151840feed7ab5)
+++ b/.idea/webContexts.xml	(date 1746512762917)
@@ -10,6 +10,7 @@
         <entry key="file://$PROJECT_DIR$/src/main/webapp/lich-su-thue-xe.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
         <entry key="file://$PROJECT_DIR$/src/main/webapp/login-google.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
         <entry key="file://$PROJECT_DIR$/src/main/webapp/login.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
+        <entry key="file://$PROJECT_DIR$/src/main/webapp/product-detail.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
         <entry key="file://$PROJECT_DIR$/src/main/webapp/saveUser.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
         <entry key="file://$PROJECT_DIR$/src/main/webapp/signin.jsp" value="file://$PROJECT_DIR$/src/main/webapp" />
       </map>
Index: src/main/webapp/saveOrder.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/saveOrder.jsp b/src/main/webapp/saveOrder.jsp
new file mode 100644
--- /dev/null	(date 1746712878032)
+++ b/src/main/webapp/saveOrder.jsp	(date 1746712878032)
@@ -0,0 +1,72 @@
+<%--
+  Created by IntelliJ IDEA.
+  User: ASUS
+  Date: 5/8/2025
+  Time: 8:57 PM
+  To change this template use File | Settings | File Templates.
+--%>
+<%@ page import="java.sql.Date" %>
+<%@ page import="vn.edu.hcmuaf.fit.doancuoiki.dao.OrderDao" %>
+<%@ page import="vn.edu.hcmuaf.fit.doancuoiki.model.User" %>
+<%@ page contentType="text/html;charset=UTF-8" language="java" %>
+
+<%
+  // Lấy user từ session
+  User user = (User) session.getAttribute("user");
+  if (user == null) {
+    response.sendRedirect("login.jsp");
+    return;
+  }
+
+  // Lấy dữ liệu từ form
+  String location = request.getParameter("location");
+  String rentalDateStr = request.getParameter("rentalStartDate");
+  String returnDateStr = request.getParameter("expectedReturnDate");
+  int vehicleTypeId = Integer.parseInt(request.getParameter("vehicleTypeId"));
+  double dailyPrice = Double.parseDouble(request.getParameter("dailyPrice"));
+  int promotionId = request.getParameter("promotionId") != null && !request.getParameter("promotionId").isEmpty()
+          ? Integer.parseInt(request.getParameter("promotionId")) : -1;
+
+  // Chuyển đổi sang java.sql.Date
+  Date rentalDate = Date.valueOf(rentalDateStr);
+  Date returnDate = Date.valueOf(returnDateStr);
+
+  // Tính số ngày thuê
+  long millis = returnDate.getTime() - rentalDate.getTime();
+  int rentalDays = (int) (millis / (1000 * 60 * 60 * 24));
+  if (rentalDays == 0) rentalDays = 1;
+
+  // Tính tổng giá thuê và phí giao hàng
+  double basePrice = rentalDays * dailyPrice;
+  double shippingFee = 50000;  // phí giao hàng cố định
+  double total = basePrice + shippingFee;
+
+  // Tìm xe có sẵn theo loại
+  OrderDao orderDao = new OrderDao();
+  String licensePlate = orderDao.getLicensePlate(vehicleTypeId, rentalDate, returnDate);
+
+  if (!licensePlate.equals("")) {
+    boolean created = orderDao.createOrder(
+            user.getId(),
+            location,
+            rentalDate,
+            returnDate,
+            licensePlate,
+            total,
+            promotionId
+    );
+
+    if (created) {
+      // Redirect tới trang thành công
+      response.sendRedirect("datxe-thanhcong.jsp?userId=" + user.getId());
+    } else {
+%>
+<h3>Đặt xe thất bại. Vui lòng thử lại sau.</h3>
+<%
+  }
+} else {
+%>
+<h3>Hiện không còn xe khả dụng cho loại bạn chọn trong thời gian này.</h3>
+<%
+  }
+%>
Index: src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/Order.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/Order.java b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/Order.java
new file mode 100644
--- /dev/null	(date 1746713646945)
+++ b/src/main/java/vn/edu/hcmuaf/fit/doancuoiki/controller/Order.java	(date 1746713646945)
@@ -0,0 +1,115 @@
+package vn.edu.hcmuaf.fit.doancuoiki.controller;
+
+import java.util.Date;
+
+public class Order {
+    private int orderId;
+    private int userId;
+    private int productId;
+    private double price;
+    private String coupon;
+    private String location;
+    private Date rentalStartDate;
+    private Date expectedReturnDate;
+    private String deliveryOption;
+    private double deliveryFee;
+    private String paymentMethod;
+    private double totalPrice;
+
+    // Getters and setters
+    public int getOrderId() {
+        return orderId;
+    }
+
+    public void setOrderId(int orderId) {
+        this.orderId = orderId;
+    }
+
+    public int getUserId() {
+        return userId;
+    }
+
+    public void setUserId(int userId) {
+        this.userId = userId;
+    }
+
+    public int getProductId() {
+        return productId;
+    }
+
+    public void setProductId(int productId) {
+        this.productId = productId;
+    }
+
+    public double getPrice() {
+        return price;
+    }
+
+    public void setPrice(double price) {
+        this.price = price;
+    }
+
+    public String getCoupon() {
+        return coupon;
+    }
+
+    public void setCoupon(String coupon) {
+        this.coupon = coupon;
+    }
+
+    public String getLocation() {
+        return location;
+    }
+
+    public void setLocation(String location) {
+        this.location = location;
+    }
+
+    public Date getRentalStartDate() {
+        return rentalStartDate;
+    }
+
+    public void setRentalStartDate(Date rentalStartDate) {
+        this.rentalStartDate = rentalStartDate;
+    }
+
+    public Date getExpectedReturnDate() {
+        return expectedReturnDate;
+    }
+
+    public void setExpectedReturnDate(Date expectedReturnDate) {
+        this.expectedReturnDate = expectedReturnDate;
+    }
+
+    public String getDeliveryOption() {
+        return deliveryOption;
+    }
+
+    public void setDeliveryOption(String deliveryOption) {
+        this.deliveryOption = deliveryOption;
+    }
+
+    public double getDeliveryFee() {
+        return deliveryFee;
+    }
+
+    public void setDeliveryFee(double deliveryFee) {
+        this.deliveryFee = deliveryFee;
+    }
+
+    public String getPaymentMethod() {
+        return paymentMethod;
+    }
+
+    public void setPaymentMethod(String paymentMethod) {
+        this.paymentMethod = paymentMethod;
+    }
+
+    public double getTotalPrice() {
+        return totalPrice;
+    }
+
+    public void setTotalPrice(double totalPrice) {
+        this.totalPrice = totalPrice;
+    }
+}
